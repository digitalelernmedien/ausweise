<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Startseite</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <main id="main-content">
    <h1 id="title">Was möchten Sie suchen?</h1>
    <p id="subtitle" class="subtitle">Bitte wählen Sie eine Kategorie aus.</p>

    <!-- Kacheln -->
    <div class="tile-container">
      <div class="tile" id="tile-personen">
        <i data-feather="users" class="tile-icon"></i>
        <span>Personen</span>
      </div>

      <div class="tile" id="tile-fahrzeuge">
        <i data-feather="truck" class="tile-icon"></i>
        <span>Fahrzeuge</span>
      </div>

      <div class="tile" id="tile-sachen">
        <i data-feather="package" class="tile-icon"></i>
        <span>Sachen</span>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer id="footer"></footer>

  <!-- Info Modal -->
  <div id="info-modal">
    <div id="info-content">
      <h2 id="modal-title" class="info-header">Information</h2>
      <p id="modal-body" class="info-text">Hier können Sie auswählen, nach welchen Kategorien Sie suchen möchten.</p>
      <p id="modal-functions-title" class="info-subheader"></p>
      <ul id="modal-functions-list" class="info-list"></ul>
      <div id="modal-warning" class="info-warning"></div>
      <div id="modal-credits" class="info-text" style="margin-top: 15px; font-size: 0.8rem; color: #8e8e93;"></div>
      <button id="info-close-btn">OK</button>
    </div>
  </div>

  <!-- Sprachauswahl -->
  <div id="settings-menu">
    <button data-lang="de">Deutsch</button>
    <button data-lang="fr">Französisch</button>
  </div>
  <div id="backdrop"></div>

  <!-- Feather Icons & JS -->
  <script src="https://unpkg.com/feather-icons"></script>
  <script>
    feather.replace();

    // Footer dynamisch erstellen
    const footerButtons = ['info', 'speech']; // Startseite nur Info + Sprache
    const footer = document.getElementById('footer');
    footer.innerHTML = '';

    footerButtons.forEach(btn => {
      const button = document.createElement('button');
      button.classList.add('icon-btn');
      button.setAttribute('aria-label', btn === 'info' ? 'Information' : 'Sprache');
      button.setAttribute('data-feather', btn === 'info' ? 'info' : 'globe');

      if(btn === 'info') {
        button.addEventListener('click', () => {
          document.getElementById('info-modal').style.display = 'flex';
        });
      } else if(btn === 'speech') {
        button.addEventListener('click', () => {
          document.getElementById('settings-menu').style.display = 'flex';
          document.getElementById('backdrop').style.display = 'block';
        });
      }

      footer.appendChild(button);
    });

    feather.replace();

    // Kachel-Events
    document.getElementById('tile-personen').addEventListener('click', () => {
      window.location.href = 'search.html';
    });
    document.getElementById('tile-fahrzeuge').addEventListener('click', () => {
      window.location.href = 'search-vehicles.html';
    });
    document.getElementById('tile-sachen').addEventListener('click', () => {
      window.location.href = 'search-items.html';
    });

    // Info Modal
    const infoCloseBtn = document.getElementById('info-close-btn');
    if(infoCloseBtn) {
      infoCloseBtn.addEventListener('click', () => {
        document.getElementById('info-modal').style.display = 'none';
      });
    }

    // Backdrop
    const backdrop = document.getElementById('backdrop');
    const settingsMenu = document.getElementById('settings-menu');
    if(backdrop) {
      backdrop.addEventListener('click', () => {
        settingsMenu.style.display = 'none';
        backdrop.style.display = 'none';
      });
    }

    // Sprachauswahl
    settingsMenu.querySelectorAll('button').forEach(btn => {
      btn.addEventListener('click', () => {
        const lang = btn.dataset.lang;
        localStorage.setItem('userLang', lang);
        settingsMenu.style.display = 'none';
        backdrop.style.display = 'none';
        location.reload(); // optional, um Texte sofort anzupassen
      });
    });

    // Sprache initial anhand Systemsprache oder gespeicherter Sprache setzen
    const savedLang = localStorage.getItem('userLang');
    const userLang = savedLang || (navigator.language.startsWith('fr') ? 'fr' : 'de');
    console.log('Aktuelle Sprache:', userLang);
  </script>
</body>
</html>
