<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Startseite</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <main id="main-content">
    <h1 id="title">Was möchten Sie suchen?</h1>
    <p id="subtitle" class="subtitle">Bitte wählen Sie eine Kategorie aus.</p>

    <!-- Kacheln -->
    <div class="tile-container">
      <div class="tile" id="tile-personen">
        <i data-feather="users" class="tile-icon"></i>
        <span>Personen</span>
      </div>

      <div class="tile" id="tile-fahrzeuge">
        <i data-feather="truck" class="tile-icon"></i>
        <span>Fahrzeuge</span>
      </div>

      <div class="tile" id="tile-sachen">
        <i data-feather="package" class="tile-icon"></i>
        <span>Sachen</span>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer id="footer">
    <!-- Buttons werden durch footer.js dynamisch eingefügt -->
  </footer>

  <!-- Infomodal -->
  <div id="info-modal">
    <div id="info-content">
      <h2 id="modal-title" class="info-header"></h2>
      <p id="modal-body" class="info-text"></p>
      <button id="info-close-btn">OK</button>
    </div>
  </div>

  <!-- Settings-Menü -->
  <div id="settings-menu">
    <button data-lang="de">Deutsch</button>
    <button data-lang="fr">Französisch</button>
  </div>
  <div id="backdrop"></div>

  <!-- Feather Icons -->
  <script src="https://unpkg.com/feather-icons"></script>

  <!-- Kachel-Events -->
  <script>
    document.getElementById('tile-personen').addEventListener('click', () => {
      window.location.href = 'search.html';
    });

    document.getElementById('tile-fahrzeuge').addEventListener('click', () => {
      window.location.href = 'search-vehicles.html';
    });

    document.getElementById('tile-sachen').addEventListener('click', () => {
      window.location.href = 'search-items.html';
    });
  </script>

  <!-- Footer-Buttons für Startseite definieren -->
  <script>
    window.footerButtons = ['info', 'speech'];
  </script>

  <!-- Footer.js einbinden -->
  <script src="footer.js"></script>

  <!-- Infomodal dynamisch laden -->
  <script>
    // Sprache: lokal gespeichert oder Gerätesprache
    let lang = localStorage.getItem('appLang') || (navigator.language.startsWith('fr') ? 'fr' : 'de');

    // Infomodal Elemente
    const infoBtn = document.getElementById("info-btn");
    const infoModal = document.getElementById("info-modal");
    const infoCloseBtn = document.getElementById("info-close-btn");
    const modalTitle = document.getElementById("modal-title");
    const modalBody = document.getElementById("modal-body");

    // Infomodal JSON laden
    fetch('infomodal.json')
      .then(res => res.json())
      .then(data => {
        const infoData = data.info_text[lang];
        if(infoData) {
          modalTitle.innerHTML = infoData.title;
          modalBody.innerHTML = infoData.body;

          // Info Button Event
          infoBtn.addEventListener('click', () => {
            infoModal.style.display = 'flex';
          });

          // Close Button Event
          infoCloseBtn.addEventListener('click', () => {
            infoModal.style.display = 'none';
          });

          // Klick außerhalb schließen
          infoModal.addEventListener('click', (e) => {
            if(e.target === infoModal) infoModal.style.display = 'none';
          });
        }
      })
      .catch(err => console.error("Fehler beim Laden von infomodal.json:", err));

    // Sprachauswahl
    const settingsMenu = document.getElementById("settings-menu");
    const backdrop = document.getElementById("backdrop");
    const speechBtn = document.getElementById("speech-btn");

    speechBtn.addEventListener("click", () => {
      settingsMenu.style.display = "flex";
      backdrop.style.display = "block";
    });

    settingsMenu.querySelectorAll("button").forEach(btn => {
      btn.addEventListener("click", () => {
        lang = btn.dataset.lang;
        localStorage.setItem("appLang", lang);
        settingsMenu.style.display = "none";
        backdrop.style.display = "none";
        location.reload(); // Seite neu laden, um Texte in neuer Sprache anzuzeigen
      });
    });

    backdrop.addEventListener("click", () => {
      settingsMenu.style.display = "none";
      backdrop.style.display = "none";
    });

    // Feather Icons rendern
    feather.replace();
  </script>
</body>
</html>
